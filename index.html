<!DOCTYPE html>
<html>
	<head>
		<title>Hi</title>
		<script src="BlobBuilder.js"></script>
		<script src="FileSaver.js"></script>
		<script src="avi.js"></script>
		<script>
window.onload = function() {
	var can = document.getElementById('canvas');
	var img = new Image();
	img.src = 'img.jpg';
	img.onload = function(){
	    can.width = img.width;
	    can.height = img.height;
	    var ctx = can.getContext('2d');
	    ctx.drawImage(img, 0, 0, img.width, img.height);
	    
		var avi = new AVIJS();
		avi.settings = {
			width: img.width,
			height: img.height
		};
		var stream = new AVIJS.Stream(15, img.width, img.height);
		for (var i=0; i < 100; ++i) {
			stream.addRGBAFrame(ctx.getImageData(0, 0, img.width, img.height).data);
		}
		avi.streams.push(stream);
		var buf = avi.getBuffer();
		saveAs(buf, 'file.avi');
	}
}
		</script>
	</head>
	
	<body>
		<canvas id="canvas" width="5" height="5"></canvas>
	</body>
</html>